<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Will you be my valentine forever, Piyu? üíò</title>
<meta name="description" content="A tiny playful valentine site. You can never say no üòàüíò"/>

<style>
:root{
  --bg1:#ffdde1; --bg2:#ee9ca7;
  --card:rgba(255,255,255,.78);
  --text:#1f1f1f;
  --yes:#22c55e; --no:#ef4444;
  --shadow:0 20px 60px rgba(0,0,0,.15);
}
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh; display:grid; place-items:center;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:
    radial-gradient(1200px 800px at 20% 10%,var(--bg1),transparent 60%),
    radial-gradient(1200px 800px at 80% 90%,var(--bg2),transparent 60%),
    radial-gradient(900px 650px at 50% 35%, rgba(255,105,180,0.18), transparent 65%),
    linear-gradient(135deg,#fff5f7,#ffe4e6);
  color:var(--text);
  overflow:hidden;
}

/* Floating hearts */
.hearts{position:fixed; inset:0; pointer-events:none; opacity:.35; z-index:1}
.heart{
  position:absolute; font-size:22px; user-select:none;
  animation:floatUp linear infinite;
  transform:translateY(120vh);
  filter: drop-shadow(0 10px 16px rgba(255,45,85,0.12));
}
@keyframes floatUp{
  from{transform:translateY(120vh) translateX(0) rotate(0deg)}
  to{transform:translateY(-20vh) translateX(40px) rotate(25deg)}
}

/* Stickers (no overlap layout) */
.stickers{position:fixed; inset:0; pointer-events:none; z-index:2}
.sticker{
  position:fixed;
  width:170px;               /* slightly bigger */
  border-radius:18px;
  padding:10px;
  background:rgba(255,255,255,0.55);
  border:1px solid rgba(255,255,255,0.75);
  box-shadow:0 18px 45px rgba(0,0,0,0.12);
  backdrop-filter: blur(7px);
  transform:rotate(var(--rot));
  opacity:0.96;
}
.sticker img{
  width:100%;
  height:auto;
  display:block;
  border-radius:14px;
}
.sticker .fallback{
  width:100%;
  aspect-ratio: 1 / 1;
  border-radius:14px;
  display:grid;
  place-items:center;
  font-size:38px;
  background:rgba(255,182,193,0.25);
  border:1px dashed rgba(255,105,180,0.45);
  color:rgba(31,31,31,0.75);
}

/* Celebration */
.confetti,.sparks{
  position:fixed; inset:0; pointer-events:none;
  z-index:6; opacity:0; transition:opacity 350ms ease;
}
.conf{
  position:absolute; width:10px; height:14px; border-radius:4px;
  transform:translateY(-10vh) rotate(0deg);
  animation:confFall linear forwards;
  opacity:.95;
}
@keyframes confFall{to{transform:translateY(110vh) rotate(720deg)}}
.spark{
  position:absolute; width:6px; height:6px; border-radius:999px;
  animation:sparkPop 900ms ease-out forwards;
  box-shadow:0 0 18px rgba(255,255,255,0.7);
}
@keyframes sparkPop{
  0%{transform:translate(-50%,-50%) scale(.7); opacity:0}
  15%{opacity:1}
  100%{transform:translate(-50%,-50%) scale(2.4); opacity:0}
}

/* Card */
.card{
  width:min(760px,calc(100vw - 32px));
  background:var(--card);
  border:1px solid rgba(255,255,255,0.7);
  border-radius:28px;
  box-shadow:var(--shadow);
  padding:28px;
  backdrop-filter: blur(12px);
  position:relative;
  z-index:4;
}
.title{
  font-size:clamp(28px,4vw,46px);
  line-height:1.08;
  margin:0 0 10px;
  letter-spacing:-0.02em;
  text-align:center;
}
.subtitle{
  margin:0 0 18px;
  text-align:center;
  font-size:16px;
  opacity:.85;
  min-height:22px;
}

/* Stage */
.stage{
  position:relative;
  height:300px;
  border-radius:22px;
  background:rgba(255,255,255,0.55);
  border:1px solid rgba(255,255,255,0.7);
  overflow:hidden;
}

/* Buttons */
button{
  appearance:none;
  border:0;
  border-radius:999px;
  padding:14px 22px;
  font-size:18px;
  font-weight:800;
  cursor:pointer;
  box-shadow:0 14px 30px rgba(0,0,0,0.14);
  user-select:none;
  white-space:nowrap;
  position:absolute;
  top:50%;
  transform:translateY(-50%);
}
button:active{transform:translateY(-50%) scale(.98)}
button:hover{filter:brightness(1.02)}
#yesBtn{background:var(--yes); color:#fff; z-index:6}
#noBtn{background:var(--no); color:#fff; z-index:7}

.hint{
  margin-top:16px;
  text-align:center;
  opacity:.75;
  font-size:14px;
  min-height:18px;
}
.success{display:none; text-align:center; padding:22px 10px 0}
.success h2{margin:10px 0 6px; font-size:30px}
.success p{margin:0; opacity:.92; font-size:16px; line-height:1.55}
.badge{
  display:inline-flex; gap:8px; align-items:center; justify-content:center;
  margin-top:14px;
  background:rgba(34,197,94,0.15);
  border:1px solid rgba(34,197,94,0.35);
  padding:10px 14px;
  border-radius:999px;
  font-weight:800;
}

@media (max-width:520px){
  .sticker{width:125px; padding:8px}
  button{font-size:16px; padding:12px 18px}
  .stage{height:330px}
}
</style>
</head>

<body>
  <div class="hearts" id="hearts"></div>
  <div class="stickers" id="stickers"></div>
  <div class="confetti" id="confetti"></div>
  <div class="sparks" id="sparks"></div>

  <main class="card">
    <h1 class="title">Will you be my valentine forever, Piyu? üíò</h1>
    <p class="subtitle" id="subtitle">Pick wisely‚Ä¶ because ‚ÄúNo‚Äù is shy today üòà</p>

    <section class="stage" id="stage">
      <button id="yesBtn">Yes üíö</button>
      <button id="noBtn">No üôÉ</button>

      <div class="success" id="success">
        <div style="font-size:58px;">ü•πüíò‚ú®</div>
        <h2>Yayyyyy! It‚Äôs a forever date üíç</h2>
        <p>
          Okay Piyu, now you‚Äôre officially stuck with me üòå<br/>
          Hugs + kisses subscription activated for life Bubu! ü´∂
        </p>
        <div class="badge">‚úÖ ‚ÄúYes‚Äù locked in forever</div>
      </div>
    </section>

    <div class="hint" id="hint">Hover ‚ÄúNo‚Äù if you dare üëÄ</div>
  </main>

<script>
/********************
 * 1) Floating hearts
 ********************/
const heartsWrap = document.getElementById("hearts");
const heartEmojis = ["üíò","üíñ","üíó","üíì","üíû","üíï","‚ù§Ô∏è","ü©∑","‚ú®","üå∏"];
let heartFastMode = false;
let heartInterval = null;

function makeHeart(){
  const el = document.createElement("div");
  el.className = "heart";
  el.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
  el.style.left = Math.random() * 100 + "vw";
  el.style.animationDuration = (heartFastMode ? (3.6 + Math.random() * 4.2) : (6 + Math.random() * 10)) + "s";
  el.style.fontSize = (16 + Math.random() * 22) + "px";
  el.style.opacity = (0.22 + Math.random() * 0.62);
  el.style.animationDelay = (-Math.random() * 10) + "s";
  heartsWrap.appendChild(el);
  setTimeout(() => el.remove(), 17000);
}
for(let i=0;i<26;i++) makeHeart();
heartInterval = setInterval(makeHeart, 600);

/********************
 * 2) Stickers: fixed non-overlapping layout
 * 2 per corner + top center + bottom center
 ********************/
const stickersWrap = document.getElementById("stickers");
const STICKER_URLS = [
  "assets/01.webp","assets/02.webp","assets/03.webp","assets/04.webp","assets/05.jpg",
  "assets/06.webp","assets/07.webp","assets/08.webp","assets/09.webp","assets/10.webp"
];

/* Layout: two per corner, separated so they never overlap */
const stickerPositions = [
  // TOP LEFT (2)
  { top:"12px", left:"12px", rot:"-10deg" },
  { top:"140px", left:"22px", rot:"7deg" },

  // TOP RIGHT (2)
  { top:"12px", right:"12px", rot:"10deg" },
  { top:"140px", right:"22px", rot:"-7deg" },

  // BOTTOM LEFT (2)
  { bottom:"12px", left:"12px", rot:"9deg" },
  { bottom:"150px", left:"22px", rot:"-8deg" },

  // BOTTOM RIGHT (2)
  { bottom:"12px", right:"12px", rot:"-9deg" },
  { bottom:"150px", right:"22px", rot:"8deg" },

  // TOP CENTER (1)
  { top:"18px", left:"50%", rot:"6deg", center:true },

  // BOTTOM CENTER (1)
  { bottom:"18px", left:"50%", rot:"-6deg", center:true },
];

STICKER_URLS.forEach((src, i) => {
  const frame = document.createElement("div");
  frame.className = "sticker";

  const p = stickerPositions[i % stickerPositions.length];
  frame.style.setProperty("--rot", p.rot);

  if (p.top) frame.style.top = p.top;
  if (p.bottom) frame.style.bottom = p.bottom;
  if (p.left) frame.style.left = p.left;
  if (p.right) frame.style.right = p.right;

  if (p.center) {
    frame.style.left = "50%";
    frame.style.transform = `translateX(-50%) rotate(${p.rot})`;
  }

  const img = document.createElement("img");
  img.src = src;
  img.alt = "cute photo";
  img.loading = "lazy";

  const fallback = document.createElement("div");
  fallback.className = "fallback";
  fallback.textContent = "üíû";

  img.onerror = () => {
    img.style.display = "none";
    frame.appendChild(fallback);
  };

  frame.appendChild(img);
  stickersWrap.appendChild(frame);
});

/********************
 * 3) Confetti + fireworks celebration
 ********************/
const confettiWrap = document.getElementById("confetti");
const sparksWrap = document.getElementById("sparks");
let celebrateOn = false;
let confInt = null;
let sparkInt = null;

function spawnConfetti(){
  if(!celebrateOn) return;
  const c = document.createElement("div");
  c.className = "conf";
  c.style.left = (Math.random() * 100) + "vw";
  c.style.animationDuration = (2.4 + Math.random() * 2.8) + "s";
  const hues = [330,345,10,45,170,200,280];
  const h = hues[Math.floor(Math.random() * hues.length)];
  c.style.background = `hsl(${h} 90% 70%)`;
  confettiWrap.appendChild(c);
  setTimeout(() => c.remove(), 6000);
}

function sparkBurst(){
  if(!celebrateOn) return;
  const x = Math.random() * window.innerWidth;
  const y = Math.random() * window.innerHeight * 0.85;
  const count = 10 + Math.floor(Math.random() * 12);
  const hues = [330,345,10,45,170,200,280];

  for(let i=0;i<count;i++){
    const s = document.createElement("div");
    s.className = "spark";
    s.style.left = x + "px";
    s.style.top = y + "px";
    const h = hues[Math.floor(Math.random() * hues.length)];
    s.style.background = `hsl(${h} 90% 70%)`;
    sparksWrap.appendChild(s);
    setTimeout(() => s.remove(), 950);
  }
}

function startCelebration(){
  celebrateOn = true;
  confettiWrap.style.opacity = "1";
  sparksWrap.style.opacity = "1";

  heartFastMode = true;
  clearInterval(heartInterval);
  heartInterval = setInterval(makeHeart, 220);
  for(let i=0;i<30;i++) makeHeart();

  for(let i=0;i<24;i++) setTimeout(spawnConfetti, i*80);
  confInt = setInterval(spawnConfetti, 120);

  for(let i=0;i<8;i++) setTimeout(sparkBurst, i*180);
  sparkInt = setInterval(sparkBurst, 520);
}

/********************
 * 4) YES/NO Logic
 * - NO runs away and stays visible
 * - NEVER overlaps YES
 * - cute messages for 2 seconds
 ********************/
const stage = document.getElementById("stage");
const yesBtn = document.getElementById("yesBtn");
const noBtn  = document.getElementById("noBtn");
const success = document.getElementById("success");
const hint = document.getElementById("hint");

let blocks = 0;
let preferRight = true;
let cooldownUntil = 0;
let msgTimer = null;

const originalNoText = "No üôÉ";
const cuteMsgs = [
  "Pick Yes na ü•∫",
  "Awww‚Ä¶ üíû",
  "Hehe nope üòú",
  "Try again üòå",
  "Yes looks cute ü©∑",
  "Don‚Äôt be mean üôà",
  "Come on bubu ü•π"
];

function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

function setInitialPositions(){
  const rect = stage.getBoundingClientRect();

  // ensure measurable widths
  yesBtn.style.left = "0px";
  noBtn.style.left = "0px";

  const yesW = yesBtn.offsetWidth;
  const noW = noBtn.offsetWidth;
  const gap = 16;

  const total = yesW + gap + noW;
  const startX = (rect.width - total) / 2;

  yesBtn.style.left = clamp(startX, 12, rect.width - yesW - 12) + "px";
  noBtn.style.left  = clamp(startX + yesW + gap, 12, rect.width - noW - 12) + "px";

  // lock NO width so the button doesn't jump on messages
  noBtn.style.minWidth = noW + "px";
  noBtn.style.textAlign = "center";
  yesBtn.style.top = "50%";
  noBtn.style.top = "50%";
}

function showCuteMsg(){
  const msg = cuteMsgs[Math.floor(Math.random() * cuteMsgs.length)];
  noBtn.textContent = msg;
  if(msgTimer) clearTimeout(msgTimer);
  msgTimer = setTimeout(() => { noBtn.textContent = originalNoText; }, 2000); // ‚úÖ 2 seconds
}

function rectRelativeToStage(el){
  const s = stage.getBoundingClientRect();
  const r = el.getBoundingClientRect();
  return { x: r.left - s.left, y: r.top - s.top, w: r.width, h: r.height };
}

function overlaps(a, b, pad){
  return !(
    a.x + a.w + pad <= b.x ||
    b.x + b.w + pad <= a.x ||
    a.y + a.h + pad <= b.y ||
    b.y + b.h + pad <= a.y
  );
}

function runNoAway(){
  const now = Date.now();
  if(now < cooldownUntil) return;
  cooldownUntil = now + 160;

  blocks++;
  hint.textContent = "Nice try üòè";
  showCuteMsg();

  const s = stage.getBoundingClientRect();
  const yes = rectRelativeToStage(yesBtn);

  const nW = noBtn.offsetWidth;
  const nH = noBtn.offsetHeight;

  const PAD = 12;
  const SAFE = 26;   // never overlap YES
  const FAR  = 120;  // far left/right

  let minX, maxX;

  if(preferRight){
    minX = yes.x + yes.w + FAR;
    maxX = s.width - nW - PAD;
    if(minX > maxX){ minX = PAD; maxX = s.width - nW - PAD; }
  } else {
    minX = PAD;
    maxX = yes.x - nW - FAR;
    if(minX > maxX){ minX = PAD; maxX = s.width - nW - PAD; }
  }

  let best = null;

  for(let i=0;i<120;i++){
    const x = minX + Math.random() * (maxX - minX);
    const y = PAD + Math.random() * (s.height - nH - PAD * 2);
    const cand = { x, y, w: nW, h: nH };
    if(!overlaps(cand, yes, SAFE)){ best = cand; break; }
  }

  if(!best){
    best = {
      x: preferRight ? (s.width - nW - PAD) : PAD,
      y: PAD + Math.random() * (s.height - nH - PAD * 2),
      w: nW, h: nH
    };
  }

  preferRight = !preferRight;

  // keep it visible + avoid hover recursion glitches
  noBtn.style.pointerEvents = "none";
  requestAnimationFrame(() => {
    noBtn.style.left = clamp(best.x, PAD, s.width - nW - PAD) + "px";
    noBtn.style.top  = clamp(best.y, PAD, s.height - nH - PAD) + "px";
    setTimeout(() => { noBtn.style.pointerEvents = ""; }, 120);
  });
}

function onYes(){
  yesBtn.style.display = "none";
  noBtn.style.display = "none";
  success.style.display = "block";
  hint.textContent = "Good choice üòåüíò";
  startCelebration();
}

window.addEventListener("load", setInitialPositions);
window.addEventListener("resize", () => {
  // keep it stable; don't reset success if she already clicked yes
  if(success.style.display === "block") return;
  noBtn.textContent = originalNoText;
  noBtn.style.top = "50%";
  yesBtn.style.top = "50%";
  setInitialPositions();
});

yesBtn.addEventListener("click", onYes);
noBtn.addEventListener("mouseenter", runNoAway);
noBtn.addEventListener("click", (e) => { e.preventDefault(); runNoAway(); });
noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); runNoAway(); }, { passive:false });
</script>
</body>
</html>
