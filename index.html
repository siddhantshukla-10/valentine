<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Will you be my valentine forever, bubu? üíò</title>

  <style>
    :root {
      --bg1: #ffdde1;
      --bg2: #ee9ca7;
      --bg3: #fff5f7;
      --bg4: #ffe4e6;

      --card: rgba(255,255,255,0.78);
      --cardBorder: rgba(255,255,255,0.78);

      --text: #1f1f1f;
      --muted: rgba(31,31,31,0.72);

      --yes: #22c55e;
      --no: #ff4d6d;

      --shadow: 0 24px 70px rgba(0,0,0,0.14);
      --shadow2: 0 10px 30px rgba(255,45,85,0.18);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      overflow: hidden;

      background:
        radial-gradient(1100px 760px at 18% 10%, var(--bg1), transparent 60%),
        radial-gradient(1100px 760px at 82% 88%, var(--bg2), transparent 62%),
        radial-gradient(800px 520px at 50% 35%, rgba(255,105,180,0.25), transparent 60%),
        linear-gradient(135deg, var(--bg3), var(--bg4));
    }

    .glow {
      position: fixed;
      inset: -20%;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(700px 500px at 25% 30%, rgba(255,45,85,0.18), transparent 60%),
        radial-gradient(700px 500px at 75% 70%, rgba(255,105,180,0.20), transparent 60%),
        radial-gradient(600px 450px at 55% 15%, rgba(255,200,220,0.22), transparent 60%);
      filter: blur(6px);
      opacity: 0.95;
    }

    .hearts, .sparks {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }
    .hearts { opacity: 0.40; }
    .sparks { opacity: 0.0; transition: opacity 500ms ease; } /* off until celebration */

    .float {
      position: absolute;
      transform: translateY(120vh);
      animation: floatUp linear infinite;
      user-select: none;
      filter: drop-shadow(0 6px 12px rgba(255,45,85,0.14));
    }
    @keyframes floatUp {
      from { transform: translateY(120vh) translateX(0) rotate(0deg); }
      to   { transform: translateY(-20vh) translateX(48px) rotate(22deg); }
    }

    /* Firework sparkles */
    .spark {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 999px;
      animation: burst 900ms ease-out forwards;
      box-shadow: 0 0 18px rgba(255,255,255,0.7);
    }
    @keyframes burst {
      0%   { transform: translate(-50%, -50%) scale(0.7); opacity: 0.0; }
      15%  { opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(2.4); opacity: 0; }
    }

    .card {
      width: min(780px, calc(100vw - 32px));
      background: var(--card);
      border: 1px solid var(--cardBorder);
      border-radius: 30px;
      box-shadow: var(--shadow), var(--shadow2);
      padding: 30px 26px;
      backdrop-filter: blur(12px);
      position: relative;
      z-index: 2;
    }

    .title {
      font-size: clamp(30px, 4vw, 48px);
      line-height: 1.06;
      margin: 0 0 10px;
      letter-spacing: -0.03em;
      text-align: center;
    }

    .subtitle {
      margin: 0 0 18px;
      text-align: center;
      font-size: 16px;
      color: var(--muted);
      min-height: 24px;
    }

    .stage {
      position: relative;
      height: 270px;
      border-radius: 24px;
      background: rgba(255,255,255,0.58);
      border: 1px solid rgba(255,255,255,0.75);
      overflow: hidden;
    }

    .row {
      position: absolute;
      left: 50%;
      top: 52%;
      transform: translate(-50%, -50%);
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: center;
    }

    .btn {
      appearance: none;
      border: 0;
      border-radius: 999px;
      padding: 14px 22px;
      font-size: 18px;
      font-weight: 900;
      cursor: pointer;
      transition: transform 0.12s ease, filter 0.12s ease;
      box-shadow: 0 14px 30px rgba(0,0,0,0.14);
      user-select: none;
      white-space: nowrap;
    }
    .btn:active { transform: scale(0.98); }
    .btn:hover { filter: brightness(1.02); }

    #yesBtn {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
    }
    #noBtn {
      background: linear-gradient(135deg, #ff4d6d, #ff1f5a);
      color: white;
      position: absolute; /* becomes absolute after first dodge */
      left: 0; top: 0;
    }

    .success {
      display: none;
      text-align: center;
      padding: 22px 18px;
    }
    .success .emoji { font-size: 54px; }
    .success h2 {
      margin: 10px 0 6px;
      font-size: 30px;
      letter-spacing: -0.02em;
    }
    .success p {
      margin: 0;
      font-size: 16px;
      color: rgba(31,31,31,0.78);
      line-height: 1.5;
    }
    .badge {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      justify-content: center;
      margin-top: 14px;
      background: rgba(34,197,94,0.14);
      border: 1px solid rgba(34,197,94,0.30);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 900;
    }

    .hint {
      margin-top: 14px;
      text-align: center;
      opacity: 0.78;
      font-size: 14px;
      color: rgba(31,31,31,0.72);
    }
    .tiny {
      margin-top: 10px;
      font-size: 12px;
      opacity: 0.6;
      text-align: center;
      color: rgba(31,31,31,0.65);
    }

    @media (max-width: 420px){
      .btn { font-size: 16px; padding: 12px 18px; }
      .stage { height: 300px; }
      .row { gap: 12px; }
    }
  </style>
</head>

<body>
  <div class="glow"></div>
  <div class="hearts" id="hearts"></div>
  <div class="sparks" id="sparks"></div>

  <main class="card">
    <h1 class="title">Will you be my valentine forever, bubu? üíò</h1>
    <p class="subtitle" id="subtitle"></p>

    <section class="stage" id="stage" aria-label="Valentine choice area">
      <!-- ‚úÖ Start: side-by-side -->
      <div class="row" id="btnRow">
        <button class="btn" id="yesBtn">Yes üíö</button>
        <button class="btn" id="noBtn">No üôÉ</button>
      </div>

      <!-- ‚úÖ After YES: buttons hidden, message visible -->
      <div class="success" id="success">
        <div class="emoji">ü•πüíò‚ú®</div>
        <h2>Yayyyy! Forever it is üíç</h2>
        <p>
          Okay bubu‚Ä¶ you just made my heart do a happy dance üíó<br/>
          Now come here, my forever valentine üòå‚ù§Ô∏è
        </p>
        <div class="badge">‚úÖ ‚ÄúYes‚Äù locked in forever</div>
      </div>
    </section>

    <div class="hint" id="hint">Try hovering ‚ÄúNo‚Äù‚Ä¶ if you dare üëÄ</div>
    <div class="tiny" id="tiny">No attempts blocked: 0 üòå</div>
  </main>

  <script>
    // ---- Cute rotating subtitle ----
    const subtitleEl = document.getElementById("subtitle");
    const lines = [
      "I made this tiny page just to ask you one thing‚Ä¶ ü•π",
      "You + me‚Ä¶ sounds like a forever kind of story üíû",
      "Now choose wisely‚Ä¶ because ‚ÄúNo‚Äù gets shy üòå"
    ];
    let li = 0, ci = 0;
    function typeLine(){
      const text = lines[li];
      subtitleEl.textContent = text.slice(0, ci++);
      if (ci <= text.length) return setTimeout(typeLine, 26);
      setTimeout(() => {
        li = (li + 1) % lines.length;
        ci = 0;
        typeLine();
      }, 1100);
    }
    typeLine();

    // ---- Floating hearts ----
    const heartsWrap = document.getElementById("hearts");
    const floatEmojis = ["üíò","üíñ","üíó","üíì","üíû","üíï","‚ù§Ô∏è","ü©∑","‚ú®","üå∏"];
    function spawnFloat(extraFast=false){
      const el = document.createElement("div");
      el.className = "float";
      el.textContent = floatEmojis[Math.floor(Math.random() * floatEmojis.length)];
      el.style.left = Math.random() * 100 + "vw";
      el.style.animationDuration = (extraFast ? (4 + Math.random() * 5) : (7 + Math.random() * 10)) + "s";
      el.style.fontSize = (16 + Math.random() * 24) + "px";
      el.style.opacity = (0.22 + Math.random() * 0.55);
      el.style.animationDelay = (-Math.random() * 10) + "s";
      heartsWrap.appendChild(el);
      setTimeout(() => el.remove(), 20000);
    }
    for (let i = 0; i < 28; i++) spawnFloat(false);
    let floatInterval = setInterval(() => spawnFloat(false), 650);

    // ---- Fireworks / sparkles (celebration mode) ----
    const sparksWrap = document.getElementById("sparks");
    let celebrateOn = false;

    function sparkBurst() {
      if (!celebrateOn) return;
      // random spot on screen
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * window.innerHeight * 0.85;

      // create multiple spark dots in one burst
      const count = 10 + Math.floor(Math.random() * 10);
      for (let i = 0; i < count; i++) {
        const s = document.createElement("div");
        s.className = "spark";
        s.style.left = x + "px";
        s.style.top  = y + "px";

        // random bright colors
        const hues = [330, 345, 10, 45, 170, 200, 280];
        const h = hues[Math.floor(Math.random() * hues.length)];
        s.style.background = `hsl(${h} 90% 70%)`;

        // shoot outwards
        const angle = Math.random() * Math.PI * 2;
        const dist = 30 + Math.random() * 90;
        const dx = Math.cos(angle) * dist;
        const dy = Math.sin(angle) * dist;

        s.animate([
          { transform: "translate(-50%, -50%) scale(0.7)", opacity: 0 },
          { transform: "translate(-50%, -50%) scale(1)", opacity: 1, offset: 0.15 },
          { transform: `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px)) scale(2.3)`, opacity: 0 }
        ], { duration: 900, easing: "ease-out", fill: "forwards" });

        sparksWrap.appendChild(s);
        setTimeout(() => s.remove(), 950);
      }
    }

    let sparkInterval = null;

    function startCelebration(){
      celebrateOn = true;
      sparksWrap.style.opacity = "1";

      // more hearts
      clearInterval(floatInterval);
      floatInterval = setInterval(() => spawnFloat(true), 240);

      // initial bursts
      for (let i = 0; i < 6; i++) setTimeout(sparkBurst, i * 220);
      // keep bursting
      sparkInterval = setInterval(sparkBurst, 520);
    }

    // ---- Button logic ----
    const stage = document.getElementById("stage");
    const btnRow = document.getElementById("btnRow");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const success = document.getElementById("success");
    const hint = document.getElementById("hint");
    const tiny = document.getElementById("tiny");

    const PAD = 12;
    const GAP = 18;      // never overlap YES
    const FAR = 90;      // aim far from YES
    let blocks = 0;
    let placeRightNext = true;

    const cuteMsgs = ["Rethink? ü•∫","Nooo üôà","Pls choose Yes üíû","Bubu‚Ä¶ really? ü•π","Try again üòå"];
    let msgTimer = null;

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function setAbsPos(el, x, y){
      const s = stage.getBoundingClientRect();
      const w = el.offsetWidth, h = el.offsetHeight;
      el.style.left = clamp(x, PAD, s.width  - w - PAD) + "px";
      el.style.top  = clamp(y, PAD, s.height - h - PAD) + "px";
    }

    function rectInStage(el){
      return {
        x: parseFloat(el.style.left || "0"),
        y: parseFloat(el.style.top  || "0"),
        w: el.offsetWidth,
        h: el.offsetHeight
      };
    }

    function overlaps(a, b){
      return !(
        a.x + a.w + GAP <= b.x ||
        b.x + b.w + GAP <= a.x ||
        a.y + a.h + GAP <= b.y ||
        b.y + b.h + GAP <= a.y
      );
    }

    // Convert NO from flex-layout to absolute-position inside stage (first time it runs)
    function detachNoToAbsolute(){
      const stageRect = stage.getBoundingClientRect();
      const noRect = noBtn.getBoundingClientRect();

      // position NO exactly where it currently appears
      const x = noRect.left - stageRect.left;
      const y = noRect.top  - stageRect.top;

      noBtn.style.position = "absolute";
      setAbsPos(noBtn, x, y);
    }

    function showCuteMsg(){
      const original = "No üôÉ";
      const msg = cuteMsgs[Math.floor(Math.random() * cuteMsgs.length)];
      noBtn.textContent = msg;

      if (msgTimer) clearTimeout(msgTimer);
      msgTimer = setTimeout(() => { noBtn.textContent = original; }, 2000);
    }

    function pickSpotOnSide(sideRight){
      const s = stage.getBoundingClientRect();

      // YES location (still in row, but we can read from DOM rects)
      const yRectAbs = yesBtn.getBoundingClientRect();
      const stageAbs = stage.getBoundingClientRect();
      const y = {
        x: yRectAbs.left - stageAbs.left,
        y: yRectAbs.top  - stageAbs.top,
        w: yesBtn.offsetWidth,
        h: yesBtn.offsetHeight
      };

      const nW = noBtn.offsetWidth, nH = noBtn.offsetHeight;

      const rightMin = y.x + y.w + FAR;
      const rightMax = s.width - nW - PAD;

      const leftMin  = PAD;
      const leftMax  = y.x - nW - FAR;

      const sideOk = sideRight ? (rightMin <= rightMax) : (leftMin <= leftMax);

      let best = null;
      for (let i = 0; i < 70; i++){
        let x;
        if (sideOk){
          x = sideRight
            ? (rightMin + Math.random() * (rightMax - rightMin))
            : (leftMin  + Math.random() * (leftMax  - leftMin));
        } else {
          x = PAD + Math.random() * (s.width - nW - PAD*2);
        }

        const yPos = PAD + Math.random() * (s.height - nH - PAD*2);
        const cand = { x, y: yPos, w: nW, h: nH };

        if (!overlaps(cand, y)){
          const cX = x + nW/2, cY = yPos + nH/2;
          const yCX = y.x + y.w/2, yCY = y.y + y.h/2;
          const d = (cX - yCX)**2 + (cY - yCY)**2;
          if (!best || d > best.d) best = { x, y: yPos, d };
        }
      }

      if (!best){
        const xFallback = sideRight ? (s.width - nW - PAD) : PAD;
        const yFallback = PAD + Math.random() * (s.height - nH - PAD*2);
        best = { x: xFallback, y: yFallback };
      }

      return best;
    }

    let noDetached = false;

    function runAway(){
      blocks++;
      tiny.textContent = `No attempts blocked: ${blocks} üòå`;
      hint.textContent = "Hehe‚Ä¶ nice try üòåüíó";

      showCuteMsg();

      if (!noDetached) {
        detachNoToAbsolute();
        noDetached = true;
      }

      const spot = pickSpotOnSide(placeRightNext);
      placeRightNext = !placeRightNext;
      setAbsPos(noBtn, spot.x, spot.y);
    }

    function onYes(){
      // remove buttons so success is never hidden
      btnRow.style.display = "none";
      success.style.display = "block";
      hint.textContent = "Awww‚Ä¶ you picked YES üíò";
      startCelebration();

      // little instant burst
      for (let i = 0; i < 20; i++) spawnFloat(true);
      for (let i = 0; i < 6; i++) setTimeout(sparkBurst, i * 200);
    }

    yesBtn.addEventListener("click", onYes);

    // Works on desktop + mobile
    noBtn.addEventListener("pointerenter", runAway);
    noBtn.addEventListener("click", (e) => { e.preventDefault(); runAway(); });
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); runAway(); }, { passive:false });
  </script>
</body>
</html>
